bash << 'EOF'
runTests() {
    npm run test || { echo "Tests failed"; exit 1; }
    npm run build-test || { echo "Build tests failed"; exit 1; }
}
main(){
branch_name=$(git branch --show-current)
if [[ $branch_name = "main" ]] || [[ $branch_name = "prelease" ]]; then
  echo "Error: Direct local commits are not allowed on $branch_name branch."
  exit 1;
fi
npx lint-staged || exit 1;
if [[ $branch_name = "development" ]]; then
  runTests
fi
}

main

EOF

